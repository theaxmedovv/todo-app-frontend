<div class="card shadow-lg mt-5 todo-container">
  <div class="header text-center p-4">
    <h1 class="display-6 fw-bold text-white mb-0">
      To Do List
    </h1>
  </div>
  <div class="card-body p-4">
    <!-- Yangi todo qo'shish formasi -->
    <div class="input-group mb-4">
      <input type="text" class="form-control"
             placeholder="Vazifa nomini kiriting..."
             [(ngModel)]="newTodoTitle" name="newTodoTitle"
             (keyup.enter)="addTodo()">
      <button class="btn btn-primary" (click)="addTodo()">
        <i class="fa-solid fa-plus fa-x1"></i>
      </button>
    </div>

    <!-- Vazifalar ro'yxati -->
    <ul class="list-group list-group-flush">
      <li *ngFor="let todo of todos"
          class="list-group-item d-flex justify-content-between align-items-center todo-item"
          [class.completed]="todo.completed">
        <div class="d-flex align-items-center">
          <input type="checkbox" class="form-check-input me-3"
                 [checked]="todo.completed"
                 (change)="toggleCompleted(todo)">

          <!-- Tahrirlash rejimi uchun shartli renderlash -->
          <ng-container *ngIf="editingTodoId === todo.id; else viewMode">
            <input type="text" class="form-control todo-edit-input"
                   [(ngModel)]="editedTodoTitle"
                   (keyup.enter)="saveEdit(todo)"
                   (blur)="cancelEditing()">
          </ng-container>

          <ng-template #viewMode>
            <span class="todo-title">
              {{ todo.title }}
            </span>
          </ng-template>
        </div>

        <div class="d-flex gap-2">
          <!-- Tahrirlash tugmasi -->
          <button class="btn btn-sm btn-outline-info" (click)="startEditing(todo)">
            <i class="fa-solid fa-pen"></i>
          </button>
          <!-- O'chirish tugmasi -->
          <button class="btn btn-sm btn-outline-danger" (click)="deleteTodo(todo.id)">
            <i class="fa-solid fa-trash"></i>
          </button>
        </div>
      </li>
    </ul>
  </div>
</div>
